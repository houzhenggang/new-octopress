<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[分类: 读书笔记 | Hegel2011的博客]]></title>
  <link href="http://octopresszhangyu.herokuapp.com/blog/categories/读书笔记/atom.xml" rel="self"/>
  <link href="http://octopresszhangyu.herokuapp.com/"/>
  <updated>2014-05-02T11:20:42+08:00</updated>
  <id>http://octopresszhangyu.herokuapp.com/</id>
  <author>
    <name><![CDATA[Hegel 2011]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[IT系统架构的模式]]></title>
    <link href="http://octopresszhangyu.herokuapp.com/blog/2014/04/12/itxi-tong-jia-gou-de-mo-shi/"/>
    <updated>2014-04-12T16:18:00+08:00</updated>
    <id>http://octopresszhangyu.herokuapp.com/blog/2014/04/12/itxi-tong-jia-gou-de-mo-shi</id>
    <content type="html"><![CDATA[<p>近日终于得以拜读了Martin Fowler的大作《The Patterns of Enterprise Application Architecture》。</p>

<p>最早了解这本书是从robbin那里，在距今很多年前的一个Java书单里。彼时他对这本书的评价大意是适合要自己动手开发框架的人看，对应用开发没什么直接的帮助。同时，他认为读下来并没有太多感觉。而回过头来看，读过这本书的中国程序员应该是不少的，但真的从中汲取营养做出东西来的人几乎没有。从这也可以看出中国工程师在动手和创新方面确实有些先天不足。</p>

<p>然而，这本书对于DHH、对于Rails则可以说是一切的开端。对这本书贯彻的最到位、突破的最有力的，非DHH用Ruby开创Rails莫属。本书成书于2002年，彼时企业应用这个称呼比较时髦，按作者的说法，他的本意是IT系统的架构，而这也符合后来软件架构所适用的范围。如病人记录、订单跟踪、信用系统、保险、汇率兑换，这些都是IT系统，也就是企业应用。而文字处理、电梯控制、交换机、编译器、操作系统、游戏则基本不能算作企业应用。只是，2002年之后，企业应用这个名字被用的烂了，反而成了大慢笨的代表，导致07/08年的时候，甚至有不少人认为Rails不适合做企业应用。但彼时我感觉Rails对这些简单的所谓企业应用才是大杀器，毕竟大部分企业应用其实就是重度的CRUD应用，而这方面Rails堪比马克沁机枪对单兵的作战效果。至于互联网类的Web应用，交互、设计是占大头的，Rails投入使用的实际效果反而不如企业应用那么明显。</p>

<p>这本书确实是rails的设计指南，或者说是rails的设计文档。但DHH的突破和创新之处还是很明显的：</p>

<ol>
<li>本书是基于.Net 和 Java的，但提及了Python和Ruby，而作者更多的应该只是一种不抱希望的假设罢了，然而DHH真的用Ruby把这本书实作了出来。</li>
<li>虽然ActiveRecord取自于本书，然而作者本身并不是把这种模式看成一种自动化的ORM方案。广义的ORM，可以包含Dao(Table Gateway)、Data Transfer Object（json，xml）以及datamapper这些把记录化作内存对象所有模式，但狭义来看ORM是仅包含datamapper的。ActiveRecord在Fowler处其实只是一种Dao的变种。而DHH直接将ActiveRecord升格成了更高度自动化的ORM模式。</li>
<li>在视图层，坚决使用了Helper模式，未加入标签也未停留在scriplet阶段。</li>
</ol>


<p>对我而言，遗憾的一点是很晚才真的读了这本书，不知是喜是优的是因为晚读所以对这本书的内容很认可，而聊以自我安慰的是如果早读了说不定我也能
创造点什么东西，当然，最后一点纯属自娱自乐。<br/>
不过，这本书以及Rails，确实定义了过去10年Web开发的发展方向。因为Rails框架实际上已经成为了Web后台框架的一个标杆，
例如Spring MVC现在走的也是类似的道路。所以，这本书确实深深影响了Web应用的开发。</p>

<p>还有一点值得一提，就是这本书是真的基于Web总结的。很多模式的书籍，其实来源于客户端界面程序，比如从做菜单中提取出来的那些模式，而本书
是基于Web的，这就使得它和很多模式的书籍很不一样了。也因此，它才可以作为Rails的设计蓝图。而所有这些模式，大都来自于实践。实际上，
至今Rails也是Web开发优秀实践的最佳代表。而且Web开发的实践模式也不止书中提到的这些，实际上了解这些模式最好的方法就是接触Rails。虽然现在的模式比本书包含的更多了，本书依然很值得推荐阅读。</p>

<h2>笔记整理</h2>

<p>业务逻辑其实是业务反逻辑： complex business illogic</p>

<h3>分层的坏处</h3>

<ol>
<li>级联变更（Cascading Changes），就是改了一个地方往往要改n个地方</li>
<li>性能损害</li>
</ol>


<p>三层模型之所以能够流行，也是因为Web的流行。Client-Server工具中，是很难实现三层配置使用的。不过如今的App开发，好像也是三层模式。<br/>
但总体而言三层模型的流行是Web和Java等崛起的后果。</p>

<h3>常见的业务代码组织形式</h3>

<ul>
<li>Transaction Script</li>
<li>Domain Module , OO对TS的改变</li>
<li>Service层</li>
</ul>


<h3>会话状态</h3>

<ul>
<li>客户端 Cookie</li>
<li>服务端（内存）</li>
<li>共享服务端（数据库 Redis Memcache 共享文件夹）</li>
</ul>


<h3>分布式</h3>

<p>i
* 不要把不同的功能（对象）组件放在不同的服务器上，这样性能有问题
* 进程间只能尽量使用粗粒度接口，如N+1一次性读取同时返回很多信息
* 同一台服务器内部使用细粒度调用，远程外观模式<br/>
* Data Transfer Object ，传输对象，上面的那种是调用方法
* 同步的接口为主
* 异步的基于消息的处理方式
* 推动你思考而不是代替你思考，最终享受乐趣的是你，承担痛苦的也是你</p>

<h3>锁的种类</h3>

<ol>
<li>乐观锁，比如自己建立版本号；</li>
<li>悲观锁，就是常见的for lock；</li>
<li>粗颗粒（coarse-grainned)锁，就是一堆对象映射成一个入口，在入口处实施加锁；</li>
<li>隐含锁，把锁加到框架里，由Lock Manager和Lock Mapper来实现<strong>模板方法</strong>。</li>
</ol>


<h3>Stub和Mock</h3>

<p>Stub：用一个类直接替换某接口的实现，在测试或开发过程中使用这个替换类<br/>
Mock：用一个服务的重写来模拟某服务</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[基于Linux 的Oracle 数据库管理]]></title>
    <link href="http://octopresszhangyu.herokuapp.com/blog/2013/11/30/ji-yu-linux-de-oracle-shu-ju-ku-guan-li/"/>
    <updated>2013-11-30T22:01:00+08:00</updated>
    <id>http://octopresszhangyu.herokuapp.com/blog/2013/11/30/ji-yu-linux-de-oracle-shu-ju-ku-guan-li</id>
    <content type="html"><![CDATA[<p>云化工程里要装Oracle，于是研究了一下Oracle在Linux上部署的细节。最近一个礼拜基本查了很多资料，不过读了两本相对基础但又很重要的书后，还是有不少收获。</p>

<p>先说今天看完的这本原创。08年出版的书了，整个只有280页左右的篇幅，内容很精悍，废话很少，但又会把细节介绍的十分清楚。比如Linux各发行版和Oracle的兼容性，ext2（有点老了）的文件系统磁盘数据结构，bios-grub-linux的启动顺序等。</p>

<p>整本书是一个很简洁的linux常用功能的介绍，并以oracle安装维护为中心，展现了使用的方式。虽然有些地方相对简陋，但确属作者的经验之谈。有工程和实际经验才能提炼出来的东西。比如补充的配置环境命令别名<code>udump, bdump</code>等，安装用于sqlplus操作方便的<code>rlwrap</code>。当然还有一系列的shell脚本。</p>

<p>但限于篇幅，有些东西确实没谈。而且整本书的重点在于linux如何使用oracle，对oracle的介绍着墨很少。又比如讲了rman，只讲了怎么打开，怎么用许多东西备份，但没提及怎么用这些东西来恢复。但总的来说还是很值得一读的一本书。至少可以了解职业实施人员的部署情况。</p>

<p>整本书只花了一个下午就读完了，至少说明书的可读性不错。</p>

<p>第二本是一个老外写的翻译的书。不少评价不太好，但我读下来还是挺有收获。因为这部书是一本偏原理的书，作者喜欢把Oracle运行是怎么一回事情交代清楚。适合于对oracle的安装已经比较了解，但并不明白其中原理的层次阅读。读完之后，基本就可以自己判断该怎么玩了。很多人评价不高，是因为这本书对部署的细节交代的并不清楚，如果只是想拿来按部就班完成任务，这本书是会令人气馁的。</p>

<p>同时，作者又偏向于介绍一些计算机的基础知识。虽然很精悍这些介绍，但是不明白的人还是看不明白，看的懂的人才会觉得作者点到位了。所以这本书落得评价不高也十分正常。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ziyang]]></title>
    <link href="http://octopresszhangyu.herokuapp.com/blog/2012/12/25/ziyang/"/>
    <updated>2012-12-25T22:42:00+08:00</updated>
    <id>http://octopresszhangyu.herokuapp.com/blog/2012/12/25/ziyang</id>
    <content type="html"><![CDATA[<p>全书比较浪费时间，最有价值的是最后的一篇历史专家的序，基本把主要内容概括出来了。</p>

<p>作为实际操作改革开放的设计师，Z肯定有过人之处，但同时也可以看出2B的地方也不少，可见人总有弱点，也不必追求尽善尽美。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[浪潮之巅]]></title>
    <link href="http://octopresszhangyu.herokuapp.com/blog/2012/12/25/lang-chao-zhi-dian/"/>
    <updated>2012-12-25T22:42:00+08:00</updated>
    <id>http://octopresszhangyu.herokuapp.com/blog/2012/12/25/lang-chao-zhi-dian</id>
    <content type="html"><![CDATA[<p>读完浪潮之巅，确实算本好书。作者能记录那么多小故事小掌故可见平时的积累很深。财经股市融资讲的也很生动。
当然，不见得所有分析都对。比如solaris他就没意识到是被ibm支撑的linux打败的，windows至今在桌面上和linux井水不犯河水。当然，盖茨的担忧不是没道理。
pc上linux毫无机会，但是移动终端就变天了。</p>

<p>另外，给我的启示是别说老师不知道我们今后能干什么，实在是没人能料到发展状况的，以前指望老师指条明路的想法太不切实际。
这个产业的高速发展和不确定性完全不是能被预知的。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[《天葬》读后感及Kindle的体验]]></title>
    <link href="http://octopresszhangyu.herokuapp.com/blog/2012/12/15/tianzang/"/>
    <updated>2012-12-15T21:09:00+08:00</updated>
    <id>http://octopresszhangyu.herokuapp.com/blog/2012/12/15/tianzang</id>
    <content type="html"><![CDATA[<p>Kindle到手后，一周读了一本半书。两本书的作者都是同一个人wang li xiong。</p>

<p>TianZang(T)这本书是写的逻辑很清晰的。从介绍西藏历史上和中国之间的关系入手，高低起伏、左转右转的关系相当引人入胜，条理极其清晰，也就很容易
记忆住了。</p>

<h3>关系简史</h3>

<p>西藏原来叫做吐蕃，唐朝时候和大唐争斗不息，互有胜负。大唐吃了不少苦头，也嫁了几个公主给他们。彼时的吐蕃人有400万之众，也未皈依佛教，
战斗力极强。藏人本是游牧民族，骑马骑牦牛，从坡上下来打唐军可以占尽便宜。到宋代，自然无力针对他们，于是让出很远一片，基本就和藏人不接壤了。吐蕃人
此时也开始信佛，没有扩张性了，人口实际上从那时开始直到后来也就只有400万的1/4-1/2。</p>

<p>元朝的番僧，是蒙古人统治的精神支柱。彼时吐蕃人就变成了<strong>国师</strong>，和蒙古人一样属于统治阶级。蒙藏那时本是一家，联合统治了华南华北。蒙藏的关系一直
很密切，其后一直到明朝之后还是如此。而在明朝，藏人开始押宝大明，毕竟大明赶走了蒙古人。他们也会向明皇帝朝贡，但也仅仅是朝贡，实际上大明
还要回赠的更多。但形式上，确实向大明称臣。到了清代，情况发生了变化。</p>

<p>在清代对葛尔丹和青海蒙古族进行了镇压和屠杀后，蒙古人的势力在西域和西藏开始衰弱，至今新疆境内仍然有蒙古自治州县就是衰弱后的残余。蒙古人的空间逐步被维吾尔
和藏人占据。清代逐步设立了青海办事大臣和驻藏办事大臣，西藏在清代被称作<strong>唐古忒</strong>。不过实际权力还在喇嘛手中，大臣被戏称为“熬茶大臣”，即只负责
施舍粮食的大臣。</p>

<p>随后英国人荣赫鹏对西藏的入侵，导致清朝开始重视西藏的主权。因为这个是很耗精力的，藏人又不好管，无人进藏的困难从未真正有解决方案，清王朝之前
的统治以名义为主，实际操作中少花钱少办事是主旋律。而且藏人也极其闭塞、愚昧不好打交道。以至于大臣见到荣赫鹏时顿有知音之感，因为他们在藏人
面前的经历类似。可见他在藏人那又多郁闷。“藏人实以极端顽固之民族”。</p>

<p>清末加强主权开始，一张一赵成为清廷处理西藏问题文武经略。他们的控制应该说还是很成功的。只是清王朝彼时已行将就木，所以他们最后是败给了自己人，起义及起哄的汉人。
民国开始，自然无力顾及西藏，基本就这样子。一段插曲是，藏人认为中国军队进驻西藏一年半以后，清朝就遭到了报应，因为它虐待了宗教领袖，还让领袖
给西太后与皇帝行跪拜之礼。当然，五十年代的报应至今还没看出端倪。</p>

<p>从辛亥革命之后到51年之前，西藏基本处于实际独立的状况，因为中国实在没空管。但是为了<strong>川滇秦陇</strong>的防卫，显然不可能长期不管。于是在51年西南西北野战军
就开始进藏。藏人的战略战术都不行，也没有打游击战，被解放军在川藏线上包了饺子。于是同中共和谈，最后算是和平解放。但藏人的统治还是寺庙宗教
在执行，中共当时是联合的西藏贵族和喇嘛，农奴制其实没有多少变化。但是，把农奴制的统治地区限制在了西藏自治区。而青海、四川甚至甘肃云南都有
一部分的藏区，这部分藏区不再实行农奴制，开始打当地的藏人贵族和寺庙。因为藏人的传统统治基本单位就是寺庙和贵族。</p>

<p>虽然行政上分在几个行政单位中，实际上藏族之间的关系千丝万缕。于是在川藏青藏吃了亏的人退进了自治区退到了拉萨，自治区反而变成了他们的根据地。
从此，自治区里面的冲突开始逐步升级，最后只能通过战争解决。自然谁胜谁败不难评判，达赖从此出逃去了印度的达兰萨拉。在得罪了高层之后，党就开始走下层路线，用阶级斗争来解决民族冲突。
伟大领袖从此也成为了藏人的领袖和心中的红太阳。这段时间到文革，基本左的很厉害，党也建立了在西藏实际有效的统治组织。藏民中的下等人逆袭成为了主要的帮手。
而且彼时国家对国人有绝对的支配权，无人进藏的问题暂时不成困难。此时的政府确实完全具备了对西藏的主权，西方的概念。</p>

<p>文革结束，党对藏人执行了宽松的政策。以藏人治理藏人。同港人治港不同，港人治港一直依靠香港有钱人上等人。藏则经过了依靠穷人又变为富人翻身，
以前的西藏贵族在取消阶级斗争后，又迅速地富了起来，社会地位等超过了穷藏人。宗教作为藏文化的核心内容，和尚和寺庙都变成了上宾。而且实际上影响着
藏人。宽松的政策容易导致四不像，反而易出问题。好比国民党想军队国际化，撤出了党代表，最后军队搞的一盘散沙。西藏在80年代则也有类似的现象。
所以部分人把这称为胡乱邦。87年之后，形式越来越紧张，藏人日益放肆，而老一代的西藏汉族干部都年纪大了。所以出现了冲突。这时候又是西藏分裂势力
开始抬头。随后，中央政府及时调整了政策，在90年底起，重新加强了对边疆的建设和防备。局面始终在党的控制之下，但摩擦始终存在。</p>

<p>而达赖在去了达兰萨拉后，和西方接触日多，又是转世灵通的底子，逐步成为了西方很喜欢的西藏代表。变成了西方牵制中国中共的一张王牌。</p>

<p>纵观简史，西藏的问题确实很复杂，地域、空间、民族、气候的特点，使得它其实是不太适用于源于欧洲的那套国家体系。而目前国际通行的标准和规则
又就是那一套，因此引经据典注定到头来总是看以谁的角度来看待问题。因为这个约等于完全处于主观判断中。</p>

<h3>未来的遐想</h3>

<p>杨度有一句名言，若我中华国国亡，除非湖南人尽死。对于西藏问题，可以借用改造一下得出：若我中华失去西藏，除非中国人尽死。<br/>
这并非危言耸听，以如今之形式及生存空间的要求而言，中国人是很难放弃西藏这块地区的。别说青、藏、川，哪怕只是一个自治区要想完全脱离汉人的怀抱
也是不可能的。即便是民主及各地拥有高度自主权的中国，也是会让西藏纳入在版图之内。在这方面，中国政府的后退空间确实不多。从当前的情况看来，只有这样继续僵持了。</p>
]]></content>
  </entry>
  
</feed>
